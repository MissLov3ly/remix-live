{"version":3,"file":"main.js","mappings":"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","sources":["webpack:///./src/app/app.tsx","webpack:///./src/app/walletConnectUI.tsx","webpack:///./src/main.tsx","webpack:///./src/services/WalletConnectRemixClient.ts","webpack:///./src/services/constant.ts","webpack:///./src/css/app.css?fdb2","webpack:///ignored|/home/circleci/remix-project/node_modules/@stablelib/random/lib/source|crypto"],"sourcesContent":["import React, {useEffect, useState} from 'react'\nimport '../css/app.css'\nimport '@fortawesome/fontawesome-free/css/all.css'\nimport type {EthereumClient} from '@web3modal/ethereum'\nimport {WalletConnectRemixClient} from '../services/WalletConnectRemixClient'\nimport {WalletConnectUI} from './walletConnectUI'\n\nconst remix = new WalletConnectRemixClient()\n\nfunction App() {\n  const [ethereumClient, setEthereumClient] = useState<EthereumClient>(null)\n  const [wagmiConfig, setWagmiConfig] = useState(null)\n  const [theme, setTheme] = useState<string>('dark')\n\n  useEffect(() => {\n    ;(async () => {\n      await remix.initClient()\n      remix.internalEvents.on('themeChanged', (theme: string) => {\n        setTheme(theme)\n      })\n\n      setWagmiConfig(remix.wagmiConfig)\n      setEthereumClient(remix.ethereumClient)\n    })()\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <h4 className=\"mt-1\">WalletConnect</h4>\n      {ethereumClient && wagmiConfig && <WalletConnectUI wagmiConfig={wagmiConfig} ethereumClient={ethereumClient} theme={theme} />}\n    </div>\n  )\n}\n\nexport default App\n","import {Web3Button, Web3Modal} from '@web3modal/react'\nimport {WagmiConfig} from 'wagmi'\nimport {PROJECT_ID} from '../services/constant'\n\nexport function WalletConnectUI({ethereumClient, wagmiConfig, theme}) {\n  return (\n    <div>\n      <div style={{display: 'inline-block'}}>\n        <WagmiConfig config={wagmiConfig}>\n          <Web3Button label=\"Connect to a wallet\" />\n        </WagmiConfig>\n      </div>\n      <Web3Modal projectId={PROJECT_ID} ethereumClient={ethereumClient} themeMode={theme} />\n    </div>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './app/app'\n\nReactDOM.render(<App />, document.getElementById('root'))\n","import {PluginClient} from '@remixproject/plugin'\nimport {createClient} from '@remixproject/plugin-webview'\nimport {w3mConnectors, w3mProvider} from '@web3modal/ethereum'\nimport {createConfig, configureChains} from 'wagmi'\nimport {\n  arbitrum,\n  arbitrumGoerli,\n  mainnet,\n  polygon,\n  polygonMumbai,\n  optimism,\n  optimismGoerli,\n  Chain,\n  goerli,\n  sepolia\n} from 'viem/chains'\nimport {EthereumClient} from '@web3modal/ethereum'\nimport EventManager from 'events'\nimport {PROJECT_ID} from './constant'\n\nexport class WalletConnectRemixClient extends PluginClient {\n  wagmiConfig\n  ethereumClient: EthereumClient\n  chains: Chain[]\n  currentChain: number\n  internalEvents: EventManager\n  currentAcount: string\n\n  constructor() {\n    super()\n    createClient(this)\n    this.internalEvents = new EventManager()\n    this.methods = ['sendAsync', 'init', 'deactivate']\n    this.onload()\n  }\n\n  onActivation() {\n    this.subscribeToEvents()\n    this.call('theme', 'currentTheme').then((theme: any) => {\n      this.internalEvents.emit('themeChanged', theme.quality.toLowerCase())\n    })\n  }\n\n  init() {\n    console.log('initializing walletconnect plugin...')\n  }\n\n  async initClient() {\n    try {\n      this.chains = [\n        mainnet,\n        arbitrum,\n        arbitrumGoerli,\n        polygon,\n        polygonMumbai,\n        optimism,\n        optimismGoerli,\n        goerli,\n        sepolia\n      ]\n      const {publicClient} = configureChains(this.chains, [\n        w3mProvider({projectId: PROJECT_ID})\n      ], {\n        pollingInterval: 5000\n      })\n\n      this.wagmiConfig = createConfig({\n        autoConnect: false,\n        connectors: w3mConnectors({projectId: PROJECT_ID, chains: this.chains}),\n        publicClient\n      })\n      this.ethereumClient = new EthereumClient(this.wagmiConfig, this.chains)\n    } catch (e) {\n      return console.error('Could not get a wallet connection', e)\n    }\n  }\n\n  subscribeToEvents() {\n    this.wagmiConfig.subscribe((event) => {\n      if (event.status === 'connected') {\n        if (event.data.account !== this.currentAcount) {\n          this.currentAcount = event.data.account\n          this.emit('accountsChanged', [event.data.account])          \n        }\n        if (this.currentChain !== event.data.chain.id) {\n          this.currentChain = event.data.chain.id\n          this.emit('chainChanged', event.data.chain.id)\n        }\n      } else if (event.status === 'disconnected') {\n        this.emit('accountsChanged', [])\n        this.currentAcount = ''\n        this.emit('chainChanged', 0)\n        this.currentChain = 0\n      }\n    })\n    this.on('theme', 'themeChanged', (theme: any) => {\n      this.internalEvents.emit('themeChanged', theme.quality)\n    })\n  }\n\n  async sendAsync(data: {method: string; params: string; id: string}) {\n    if (this.wagmiConfig.status === 'connected') {\n      if (data.method === 'eth_accounts') {\n        return {\n          jsonrpc: '2.0',\n          result: [this.wagmiConfig.data.account],\n          id: data.id\n        }\n      } else {\n        const provider = await this.wagmiConfig.connector.getProvider({\n          chainId: this.wagmiConfig.data.chain.id\n        })\n\n        if (provider.isMetaMask) {\n          return new Promise((resolve) => {\n            provider.sendAsync(data, (error, response) => {\n              if (error) {\n                if (error.data && error.data.originalError && error.data.originalError.data) {\n                  resolve({\n                    jsonrpc: '2.0',\n                    error: error.data.originalError,\n                    id: data.id\n                  })\n                } else if (error.data && error.data.message) {\n                  resolve({\n                    jsonrpc: '2.0',\n                    error: error.data && error.data,\n                    id: data.id\n                  })\n                } else {\n                  resolve({\n                    jsonrpc: '2.0',\n                    error,\n                    id: data.id\n                  })\n                }                \n              }\n              return resolve(response)\n            })\n          })\n        } else {\n          try {\n            const message = await provider.request(data)\n            return {jsonrpc: '2.0', result: message, id: data.id}\n          } catch (e) {\n            return {jsonrpc: '2.0', error: { message: e.message, code: -32603 }, id: data.id}\n          }\n        }\n      }\n    } else {\n      const err = `Cannot make ${data.method} request. Remix client is not connected to walletconnect client`\n      console.error(err)\n      return {jsonrpc: '2.0', error: { message: err, code: -32603 }, id: data.id}\n    }\n  }\n\n  async deactivate() {\n    console.log('deactivating walletconnect plugin...')\n    await this.ethereumClient.disconnect()\n  }\n}\n","// @ts-ignore\nexport const PROJECT_ID = WALLET_CONNECT_PROJECT_ID","// extracted by mini-css-extract-plugin\nexport {};","/* (ignored) */"],"names":["remix","WalletConnectRemixClient","App","useState","ethereumClient","setEthereumClient","wagmiConfig","setWagmiConfig","theme","setTheme","useEffect","initClient","internalEvents","on","WalletConnectUI","display","PROJECT_ID","ReactDOM","render","document","getElementById","createClient","EventManager","methods","onload","subscribeToEvents","call","then","emit","quality","toLowerCase","console","log","chains","mainnet","arbitrum","arbitrumGoerli","polygon","polygonMumbai","optimism","optimismGoerli","goerli","sepolia","configureChains","w3mProvider","projectId","pollingInterval","publicClient","createConfig","autoConnect","connectors","w3mConnectors","EthereumClient","error","subscribe","event","status","data","account","currentAcount","currentChain","chain","id","method","jsonrpc","result","connector","getProvider","chainId","provider","isMetaMask","Promise","resolve","sendAsync","response","originalError","message","request","code","err","disconnect","PluginClient","WALLET_CONNECT_PROJECT_ID"],"sourceRoot":""}